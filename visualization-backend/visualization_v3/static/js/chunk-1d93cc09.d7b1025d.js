(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d93cc09"],{"7cf8":function(t,o,e){"use strict";e.d(o,"a",function(){return r}),e.d(o,"d",function(){return a}),e.d(o,"b",function(){return i}),e.d(o,"f",function(){return l}),e.d(o,"c",function(){return c}),e.d(o,"e",function(){return s});var n=e("b775");function r(t){return console.log(t),Object(n["a"])({url:"api/monitor/build/",method:"POST",data:t})}function a(){return Object(n["a"])({url:"api/monitor/show/monitorProject/",method:"POST"})}function i(t){return Object(n["a"])({url:"api/monitor/modify/deleteProject/",method:"POST",data:{projectID:t,operation:"delete"}})}function l(t,o){return Object(n["a"])({method:"POST",data:{projectID:t,operation:o}})}function c(t){return Object(n["a"])({url:"api/monitor/data/",method:"POST",data:{projectID:t}})}function s(t){return Object(n["a"])({url:"api/monitor/subprocess/data/",method:"POST",data:{sample_id:t}})}},b3e2:function(t,o,e){"use strict";e.r(o);var n=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"app-container"},[t.isReload?e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","empty-text":"暂无监控项目"}},[e("el-table-column",{attrs:{label:"监控项目",prop:"projectID"}}),t._v(" "),e("el-table-column",{attrs:{label:"监控路径",prop:"path"}}),t._v(" "),e("el-table-column",{attrs:{label:"扫描间隔",prop:"scan_iterval"}}),t._v(" "),e("el-table-column",{attrs:{label:"资源占用",prop:"cache_limit"}}),t._v(" "),e("el-table-column",{attrs:{label:"用户ID",prop:"user_id"}}),t._v(" "),e("el-table-column",{attrs:{label:"创建日期",prop:"build_date"}}),t._v(" "),e("el-table-column",{attrs:{label:"最近更新",prop:"update_date"}}),t._v(" "),e("el-table-column",{attrs:{label:"进程ID",prop:"processID"}}),t._v(" "),e("el-table-column",{attrs:{label:"监控状态",prop:"status"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",fixed:"right",width:"200px"},scopedSlots:t._u([{key:"header",fn:function(o){return[e("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus",round:""},on:{click:function(o){t.dialogFormVisible=!0}}},[t._v("\n          创建监控项目\n        ")])]}},{key:"default",fn:function(o){return[e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.handleStop(o.$index,o.row)}},model:{value:t.button_state,callback:function(o){t.button_state=o},expression:"button_state"}},[t._v(t._s(t.button_state[o.$index]))]),t._v(" "),e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.open(o.$index,o.row)}}},[t._v("删除监控")])]}}],null,!1,2677118154)})],1):t._e(),t._v(" "),e("el-dialog",{attrs:{title:"创建监控项目",visible:t.dialogFormVisible,center:""},on:{"update:visible":function(o){t.dialogFormVisible=o}}},[e("el-form",{ref:"monitorform"},[e("el-form-item",{attrs:{label:"项目名称"}},[e("el-input",{model:{value:t.monitorform.projectID,callback:function(o){t.$set(t.monitorform,"projectID",o)},expression:"monitorform.projectID"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"监控路径"}},[e("el-input",{model:{value:t.monitorform.path,callback:function(o){t.$set(t.monitorform,"path",o)},expression:"monitorform.path"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"路径偏好"}},[e("el-input",{attrs:{placeholder:"*"},model:{value:t.monitorform.monitor_prefix,callback:function(o){t.$set(t.monitorform,"monitor_prefix",o)},expression:"monitorform.monitor_prefix"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"扫描间隔"}},[e("el-input",{model:{value:t.monitorform.scan_iterval,callback:function(o){t.$set(t.monitorform,"scan_iterval",o)},expression:"monitorform.scan_iterval"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"监控脚本"}},[e("el-input",{attrs:{placeholder:"/annoroad/data1/bioinfo/PMO/yangmengcheng/Work/web/Tool-kit-server/Tools/Monitor/bin/Monitor.py"},model:{value:t.monitorform.monitor_script,callback:function(o){t.$set(t.monitorform,"monitor_script",o)},expression:"monitorform.monitor_script"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"导出类/函数名"}},[e("el-input",{attrs:{placeholder:"MT"},model:{value:t.monitorform.monitor_class,callback:function(o){t.$set(t.monitorform,"monitor_class",o)},expression:"monitorform.monitor_class"}})],1)],1),t._v(" "),e("template",{slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(o){return t.handleBuild()}}},[t._v("立即创建")]),t._v(" "),e("el-button",{on:{click:function(o){return t.resetForm("monitorform")}}},[t._v("重置")]),t._v(" "),e("el-button",{on:{click:function(o){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),t.buildproject_flag?e("el-alert",{attrs:{title:"创建失败",type:"error","show-icon":""}}):t._e()],1)],2)],1)},r=[],a=e("7cf8"),i={data:function(){return{tableData:[],monitorform:{},dialogFormVisible:!1,button_state:{},isReload:!0,buildproject_flag:!1}},methods:{handleDelete:function(t){console.log(t),Object(a["b"])(t.projectID)},handleStop:function(t,o){var e=this;if("暂停监控"==this.button_state[t]){var n="stop";Object(a["f"])(o.projectID,n).then(function(o){console.log("operation ",o);var n=e.button_state[t];e.button_state[t]="启动监控"===n?"暂停监控":"启动监控",e.tableData=o,console.log(e.button_state)})}else{var r="reboot";Object(a["f"])(o.projectID,r).then(function(o){console.log("operation ",o);var n=e.button_state[t];e.button_state[t]="启动监控"===n?"暂停监控":"启动监控",e.tableData=o,console.log(e.button_state)})}},state:function(t){return console.log(t),this.button_state[t]},handleBuild:function(){var t=this;this.monitorform["status"]="new",console.log(this.monitorform),Object(a["a"])(this.monitorform).then(function(o){console.log(o),t.tableData=o,t.dialogFormVisible=!1,t.$message({message:"创建监控项目成功",type:"success"})}).catch(function(o){t.buildproject_flag=!0})},resetForm:function(t){this.$refs.formName.resetFields()},open:function(t,o){var e=this;this.$confirm("将删除项目设置及监控数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(a["b"])(o.projectID).then(function(t){e.tableData=t}),e.$message({type:"success",message:"删除成功!"})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},reload:function(){var t=this;this.isReload=!1,this.$nextTick(function(){t.isReload=!0})}},created:function(){var t=this;Object(a["d"])().then(function(o){for(var e in console.log(o),o)console.log(e),t.button_state[e]="running"===o[e]["status"]?"暂停监控":"启动监控";console.log(t.button_state),t.tableData=o})},computed:{state_now:function(t){return function(t){return this.button_state[t]}}}},l=i,c=e("2877"),s=Object(c["a"])(l,n,r,!1,null,null,null);o["default"]=s.exports}}]);